---
import type { Hero } from "../../types/index";
import { Image } from "astro:assets";
import urlFor from "../../lib/sanity.urlForImage";
import heroBackground from "../../assets/hero-bg.png";
import heroFeatured from "../../assets/crane-illustration.svg";
import BackgroundIllustration from "../BackgroundIllustration.astro";

type Props = {
  content?: Hero;
};

const { content } = Astro.props;
---

<article>
  <div class="grid | content-wrapper">
    <div class="text | flow">
      <header>
        <p class="small-title">{content?.title}</p>
        <h1>{content?.heading}</h1>
      </header>
      <p>{content?.text}</p>
    </div>
    <Image
      src={urlFor(content?.image?.asset).width(1200).url()}
      alt={content?.image?.alt || ""}
      width={content?.image?.asset?.metadata.dimensions.width}
      height={content?.image?.asset?.metadata.dimensions.height}
      format="svg"
      loading="eager"
    />
  </div>
  <BackgroundIllustration zIndex={1} opacity={0.7} color="#ffffff" />
  <Image
    class="bg-image"
    src={heroBackground}
    width={1920}
    height={1080}
    alt=""
    format="webp"
    loading="eager"
  />
</article>

<style>
  article {
    position: relative;
    color: var(--color-primary-light);
    padding-block-start: 12rem;
    padding-block-end: 10rem;
    background: var(--color-background-gradient);
    overflow: hidden;
  }

  .grid {
    position: relative;
    z-index: 3;
    display: grid;
    grid-template-columns: auto minmax(auto, 45rem);
    column-gap: var(--space-l);
    align-items: center;

    & img {
      position: relative;
      left: -5rem;
      top: -3rem;
      width: max(20vw, 50rem);
    }
  }

  .text {
    position: relative;
    /* width: 70%; */

    &.flow {
      --flow-space: 2rem;
    }

    & h1 {
      color: var(--color-white);
      text-wrap: pretty;
      margin-block-start: 1rem;
    }

    & .small-title {
      opacity: var(--text-opacity-shade);
    }

    & header + p {
      font-size: var(--step-1);
      text-wrap: balance;
    }
  }

  .bg-image {
    /* top: -25%; */
    opacity: 0.12;
    mix-blend-mode: luminosity;
  }
</style>
